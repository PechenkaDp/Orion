{% extends 'base.html' %}
{% load static %}

{% block title %}–ó–∞–¥–∞—á–∏ –°–ò–ó | –û—Ä–∏–æ–Ω{% endblock %}

{% block content %}
<div class="page-header">
    <h1>–ó–∞–¥–∞—á–∏ –°–ò–ó</h1>
    <button class="action-btn" onclick="location.href='{% url 'ppe_create' %}'">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
</div>

<div class="filter-bar">
    <form method="get" action="{% url 'ppe_list' %}">
        <div class="filter-group">
            <label for="status">–°—Ç–∞—Ç—É—Å:</label>
            <select name="status" id="status" class="form-control" onchange="this.form.submit()">
                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                <option value="new" {% if status_filter == 'new' %}selected{% endif %}>–ù–æ–≤–∞—è</option>
                <option value="in_progress" {% if status_filter == 'in_progress' %}selected{% endif %}>–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</option>
                <option value="completed" {% if status_filter == 'completed' %}selected{% endif %}>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
                <option value="canceled" {% if status_filter == 'canceled' %}selected{% endif %}>–û—Ç–º–µ–Ω–µ–Ω–æ</option>
            </select>
        </div>
    </form>
</div>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                <th>–°–ò–ó</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–î–∞—Ç–∞ –∑–∞—è–≤–∫–∏</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for request in page_obj %}
            <tr>
                <td>#{{ request.id }}</td>
                <td>{{ request.employee }}</td>
                <td>{{ request.ppe_item.name }}</td>
                <td>{{ request.quantity }}</td>
                <td>{{ request.request_date|date:"d.m.Y H:i" }}</td>
                <td>
                    <span class="status-badge {% if request.status == 'new' %}status-pending{% elif request.status == 'in_progress' %}status-pending{% elif request.status == 'completed' %}status-completed{% elif request.status == 'canceled' %}status-urgent{% endif %}">
                        {% if request.status == 'new' %}–ù–æ–≤–∞—è{% elif request.status == 'in_progress' %}–í –æ–±—Ä–∞–±–æ—Ç–∫–µ{% elif request.status == 'completed' %}–í—ã–ø–æ–ª–Ω–µ–Ω–æ{% elif request.status == 'canceled' %}–û—Ç–º–µ–Ω–µ–Ω–æ{% endif %}
                    </span>
                </td>
                <td>
                    <a href="{% url 'ppe_detail' request.id %}" class="icon-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä"><span class="btn-icon">üëÅÔ∏è</span></a>
                    <a href="{% url 'ppe_update' request.id %}" class="icon-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"><span class="btn-icon">‚úèÔ∏è</span></a>
                    <a href="{% url 'ppe_delete' request.id %}" class="icon-btn" title="–£–¥–∞–ª–∏—Ç—å"><span class="btn-icon">üóëÔ∏è</span></a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="empty-table">–ó–∞—è–≤–∫–∏ –Ω–∞ –°–ò–ó –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% include 'partials/pagination.html' with page=page_obj %}
{% endblock %}